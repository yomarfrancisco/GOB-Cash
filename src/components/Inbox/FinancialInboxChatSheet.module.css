/* Financial Inbox Chat Sheet - unified with inbox sheet */

.container {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  /* No background - ActionSheet provides the white background */
  min-height: 0;
  overflow: hidden;
}

/* Username row - ActionSheet provides the close button, so we start with username row */
.usernameRow {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 20px 20px 14px 20px; /* Top padding to account for ActionSheet's close button space */
  flex-shrink: 0;
}

.backButton {
  background: none;
  border: none;
  padding: 0;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
}

.avatar {
  width: 38px; /* Notification-style avatar size */
  height: 38px;
  border-radius: 50%;
  overflow: hidden;
  background: #fff; /* White background for BRICS girl */
  flex-shrink: 0;
}

.avatarImage {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.name {
  font-size: 15px; /* Body text size, not oversized */
  font-weight: 400; /* Normal weight */
  color: #000;
  flex: 1;
}

/* Divider line - faint bluish-gray, full width */
.divider {
  height: 1px;
  background: #E8E8ED; /* Light bluish-grey divider */
  margin: 0 0 24px 0; /* Increased spacing below divider for more breathing room */
  flex-shrink: 0;
}

/* Message area - wider margins for more content width */
.messageArea {
  flex: 1;
  overflow-y: auto;
  padding: 0 20px 16px 20px; /* Wider horizontal margins, content starts below divider */
  min-height: 0;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain; /* Prevent scroll chaining to parent .as-body */
}

.messageWrapper {
  display: flex;
  align-items: flex-end; /* Align avatar to bottom of bubble, not top */
  gap: 8px;
  width: 100%;
}

.messageAvatar {
  width: 31px; /* Map footer avatar size */
  height: 31px;
  border-radius: 50%;
  overflow: hidden;
  background: #fff; /* White background for BRICS girl */
  flex-shrink: 0;
}

.messageAvatarImage {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.bubbleContainer {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 4px;
  min-width: 0;
  max-width: calc(100% - 39px); /* Match input width - avatar (31px) + gap (8px) */
}

.messageBubble {
  background: #F3F3F9; /* Exact Figma bubble color */
  border-radius: 16px; /* Fully rounded corners */
  padding: 16px 20px; /* Increased padding for more breathing room (top/bottom: 16px, left/right: 20px) */
  font-size: 15px;
  line-height: 1.4;
  font-weight: 400; /* Normal weight */
  color: #000;
  max-width: 100%;
  word-wrap: break-word;
  width: 100%; /* Take full width of container to match input */
}

/* Reduced bottom padding for Ama intro bubble to tighten spacing */
/* AMA intro bubble - scoped Acumin VF font override and theme color */
.amaIntroMessageBubble {
  padding-bottom: 0px; /* Eliminate dead space at bottom of bubble */
  font-family: 'Acumin VF', system-ui, -apple-system, sans-serif;
  background: #CBFFA3; /* Chat bubble theme color */
  border: 1px solid rgba(0, 0, 0, 0.10); /* Subtle border for definition */
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08); /* Ensure bubble shadow */
}

.timestamp {
  font-size: 12px;
  color: #8E8E93; /* Light bluish-grey timestamp */
  align-self: flex-end;
  padding-right: 4px;
  margin-top: 2px;
}

/* Input bar - no divider line above, wider margins */
.inputBar {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 20px; /* Wider margins to match message area and maximize input width */
  background: #fff;
  flex-shrink: 0;
  /* No border-top - removed divider line */
}

.attachButton {
  background: none;
  border: none;
  padding: 0;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  flex-shrink: 0;
}

.input {
  flex: 1;
  background: #E6E6EB; /* Exact Figma input background */
  border: none;
  border-radius: 24px;
  padding: 12px 16px;
  font-size: 15px;
  color: #000;
  outline: none;
  max-width: calc(100% - 36px); /* Match bubble width - paperclip (24px) + gap (12px) */
  min-width: 0; /* Allow flex shrinking */
}

.input::placeholder {
  color: rgba(142, 142, 147, 0.6); /* Light placeholder with reduced opacity */
}

/* Typing indicator (3 dots) */
.typingDots {
  display: inline-flex;
  align-items: center;
  gap: 4px;
}

.typingDots span {
  width: 6px;
  height: 6px;
  border-radius: 999px;
  background: rgba(0, 0, 0, 0.4);
  animation: typingDot 1s infinite ease-in-out;
}

.typingDots span:nth-child(2) {
  animation-delay: 0.15s;
}

.typingDots span:nth-child(3) {
  animation-delay: 0.3s;
}

@keyframes typingDot {
  0%, 80%, 100% {
    opacity: 0.3;
    transform: translateY(0);
  }
  40% {
    opacity: 1;
    transform: translateY(-2px);
  }
}

/* Ama intro card block animations */
/* Base state: hidden */
.amaIntroCardBlock {
  opacity: 0;
  transform: translateY(8px);
  transition:
    opacity 280ms ease-out,
    transform 280ms ease-out;
}

/* Visible state: fades in + slides up */
.amaIntroCardBlockVisible {
  opacity: 1;
  transform: translateY(0);
}

/* APY pill pop-in animation */
/* Base pill state: slightly smaller + lower + invisible */
.amaIntroApyPillAnimated {
  opacity: 0;
  transform: translateY(4px) scale(0.9);
  transform-origin: center;
  transition:
    opacity 220ms ease-out 120ms,
    transform 220ms ease-out 120ms;
}

/* Visible pill: full size, crisp */
.amaIntroApyPillVisible {
  opacity: 1;
  transform: translateY(0) scale(1);
}

/* Spacing between tiles - reduced by 30-40% for tighter fit */
/* AMA intro tiles - lime green background to match intro bubble */
.amaIntroTile {
  margin-top: 3px; /* Further reduced to tighten gap between card and map */
  background-color: #CBFFA3 !important;
  box-shadow: none !important;
  border: none !important;
}

/* Typing indicator bubble - lime green theme for AMA intro */
.amaIntroTypingBubble {
  background: #CBFFA3 !important;
  border: 1px solid rgba(0, 0, 0, 0.10) !important;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08) !important;
}

.amaIntroTile:first-child,
.amaIntroTileFirst {
  margin-top: 0; /* No margin on first tile */
}

/* Staggered animation for second tile (map) */
.amaIntroTileStaggered {
  opacity: 0;
  transform: translateY(8px);
  transition:
    opacity 280ms ease-out 120ms,
    transform 280ms ease-out 120ms;
}

.amaIntroCardBlockVisible .amaIntroTileStaggered {
  opacity: 1;
  transform: translateY(0);
}

/* Shared typography for promo tiles - Acumin VF scoped to AMA intro only */
.amaIntroMessageBubble .promoTitle {
  font-family: 'Acumin VF', system-ui, -apple-system, sans-serif;
  font-size: 13px;
  font-weight: 600;
  color: #0a0a0a;
  margin: 6px 0 0 0; /* Reduced from 8px to tighten space above titles */
  padding: 0;
  text-align: center;
  line-height: 1.25;
  white-space: nowrap;
  overflow: visible;
  text-overflow: unset;
  letter-spacing: -0.1px;
}

.amaIntroMessageBubble .promoSubtext {
  font-family: 'Acumin VF', system-ui, -apple-system, sans-serif;
  font-size: 13px;
  font-weight: 400;
  color: rgba(10, 10, 10, 0.6);
  margin: 0;
  text-align: center;
  line-height: 1.35;
}

/* Reduced map height for Ama intro - match card preview height (74px) */
.amaIntroMapPreview {
  height: 74px !important; /* Match card preview height for consistent vertical footprint */
  margin-bottom: 6px !important; /* Reduced spacing between map image and caption */
}

/* Chat CTA button - smaller version for in-chat use */
.chatCtaButton {
  width: 100%;
  padding: 12px 16px;
  background: #000;
  color: #fff;
  border: none;
  border-radius: 12px;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  transition: opacity 0.2s;
  margin: 0;
}

.chatCtaButton:hover {
  opacity: 0.9;
}

.chatCtaButton:active {
  opacity: 0.8;
}

/* Get Started CTA bubble - matches AMA intro lime green theme */
.amaIntroCtaBubble {
  background: #CBFFA3 !important;
  border: 1px solid rgba(0, 0, 0, 0.10) !important;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08) !important;
}

/* Get Started CTA button - Acumin VF scoped to AMA intro only */
.getStartedButton {
  width: 100%;
  padding: 16px;
  background: #000;
  color: #fff;
  border: none;
  border-radius: 12px;
  font-family: 'Acumin VF', system-ui, -apple-system, sans-serif;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: opacity 0.2s;
  margin-top: 12px; /* Reduced from 16px to tighten space above button */
}

.getStartedButton:hover {
  opacity: 0.9;
}

.getStartedButton:active {
  opacity: 0.8;
}

